// @flow
import { ORDER, ORDER_ITEM, BATCH, CONTAINER, SHIPMENT } from 'modules/relationMapV2/constants';

type LINE_CONNECTOR = 'VERTICAL' | 'HORIZONTAL';

export type Entity =
  | typeof ORDER
  | typeof BATCH
  | typeof ORDER_ITEM
  | typeof CONTAINER
  | typeof SHIPMENT;

export type CellRender = {
  type: | typeof ORDER
    | typeof ORDER_ITEM
    | typeof BATCH
    | typeof CONTAINER
    | typeof SHIPMENT
    | 'duplicateOrder'
    | 'duplicateOrderItem'
    | 'shipmentWithoutContainer'
    | 'itemSummary'
    | 'batchSummary'
    | 'containerSummary'
    | 'shipmentSummary'
    | 'placeholder',
  data?: mixed,
  entity?: Entity,
  beforeConnector?: ?LINE_CONNECTOR,
  afterConnector?: ?LINE_CONNECTOR,
  isLoadedData?: boolean,
};

export type State = {|
  viewer: 'Order' | 'Shipment',
  order: Object,
  shipment: Object,
  targets: Array<string>,
  isDragging: boolean,
  moveEntity: {
    isOpen: boolean,
    isProcessing: boolean,
    detail: {
      from: {
        id: string,
        icon: string,
        value: string,
      },
      to: {
        id: string,
        icon: string,
        value: string,
      },
    },
  },
  itemActions: {
    isOpen: boolean,
    isProcessing: boolean,
    detail: {
      entity: {
        id: string,
        no: string,
      },
    },
    type?: 'createBatch' | 'deleteItem',
  },
  containerActions: {
    isOpen: boolean,
    isProcessing: boolean,
    detail: {
      entity: {
        id: string,
        no: string,
      },
    },
    type?: 'createContainer' | 'deleteContainer',
  },
  batchActions: {
    isOpen: boolean,
    isProcessing: boolean,
    detail: {
      entity: {
        id: string,
        no: string,
      },
      from?: {
        id: string,
        type: string,
      },
    },
    type?: 'createBatch' | 'deleteBatch',
  },
  moveActions: {
    isOpen: boolean,
    isProcessing: boolean,
    orderIds: Array<string>,
    containerIds: Array<string>,
    shipmentIds: Array<string>,
    importerIds: Array<string>,
    exporterIds: Array<string>,
    type?: | 'existOrder'
      | 'newOrder'
      | 'existContainer'
      | 'newContainer'
      | 'existShipment'
      | 'newShipment',
  },
  createItem: {
    isOpen: boolean,
    isProcessing: boolean,
    detail: {
      entity: {
        id: string,
      },
    },
  },
  clone: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  autoFill: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  split: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  deleteEntities: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  deleteBatches: {
    isRemove: boolean,
    isOpen: boolean,
    isProcessing: boolean,
  },
  status: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  tags: {
    source: string,
    isOpen: boolean,
    isProcessing: boolean,
  },
  edit: {
    type: string,
    selectedId: string,
    orderId?: string,
    orderIds?: Array<string>,
    shipmentIds?: Array<string>,
    containerIds?: Array<string>,
    exporterIds?: Array<string>,
    importerIds?: Array<string>,
    shipment?: Object,
  },
  newOrders: Array<string>,
  newShipments: Array<string>,
|};
