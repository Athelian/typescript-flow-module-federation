// @flow
import type { BatchItemForm } from 'modules/batch/type.js.flow';
import type { PES } from 'modules/product/type.js.flow';

type Batch = {
  id: string,
};

type ProductProvider = {
  id: string,
};

export type OrderItem = {
  id: string,
  sort: number,
  quantity: number,
  price: number,
  batches: Batch,
  productProvider: ProductProvider,
};

export type Order = {
  id: string,
  PO: string,
  date: ?Date,
  exporter: {
    name: string,
  },
  batchedQuantity: number,
  shippedQuantity: number,
  updatedAt: string | Date,
  createdAt: string | Date,
  orderItems: Array<OrderItem>,
};

export type SelectableOrderItem = {
  id: string,
  quantity: number,
  price: number,
  order: {
    PO: string,
    currency: string,
    exporter: {
      id: string,
    },
  },
  productExporterSupplier: {
    product: {
      name: string,
      serial: string,
      files: Array<{
        path: string,
      }>,
    },
  },
  batchItems: Array<{
    no: string,
    quantity: number,
  }>,
};

export type OrderItemForm = {
  productExporterSupplier: PES,
  quantity?: number,
  price?: number,
  batchItems: Array<BatchItemForm>,
};

export type OrderForm = {
  PO?: string,
  date?: ?Date,
  PI?: ?string,
  exporterId?: string,
  incoterms?: ?string,
  deliveryPlace?: ?string,
  currency?: string,
  memo?: ?string,
  orderItems: Array<OrderItemForm>,
  files: Array<{
    path: string,
    type: string,
    memo?: string,
  }>,
};
